        dist += Math.pow(Math.abs(ideologies[i].stats.govt - liberty), 2)

98

        dist += Math.pow(Math.abs(ideologies[i].stats.dipl - peace), 1.73856063)

99

        dist += Math.pow(Math.abs(ideologies[i].stats.scty - progress), 1.73856063)

100

        if (dist < ideodist) {

101

            ideology = ideologies[i].name

102

            ideodist = dist

103

        }

104

    }

105

    document.getElementById("ideology-label").innerHTML = ideology

106

​

107

    function createImage(src, x, y, w, h) {

108

        img = new Image ()

109

        img.src = src

110

        img.onLoad = function() {

111

            ctx.drawImage(img, x, y, w, h)

112

        }

113

    }

114

​

115

    window.onload = function() {

116

        var c = document.createElement("canvas")

117

        var ctx = c.getContext("2d")

118

        c.width = 800;

119

        c.height = 650;

120

        ctx.fillStyle = "#EEEEEE"

121

        ctx.fillRect(0,0,800,650);

122

​

123

        img = document.getElementById("img-equality")

124

        ctx.drawImage(img, 20, 170, 100, 100);

125

        img = document.getElementById("img-wealth")

126

        ctx.drawImage(img, 680, 170, 100, 100)

127

        img = document.getElementById("img-might")

128

        ctx.drawImage(img, 20, 290, 100, 100)

129

        img = document.getElementById("img-peace")

130

        ctx.drawImage(img, 680, 290, 100, 100)

131

        img = document.getElementById("img-liberty")        dist += Math.pow(Math.abs(ideologies[i].stats.govt - liberty), 2)

98

        dist += Math.pow(Math.abs(ideologies[i].stats.dipl - peace), 1.73856063)

99

        dist += Math.pow(Math.abs(ideologies[i].stats.scty - progress), 1.73856063)

100

        if (dist < ideodist) {

101

            ideology = ideologies[i].name

102

            ideodist = dist

103

        }

104

    }

105

    document.getElementById("ideology-label").innerHTML = ideology

106

​

107

    function createImage(src, x, y, w, h) {

108

        img = new Image ()

109

        img.src = src

110

        img.onLoad = function() {

111

            ctx.drawImage(img, x, y, w, h)

112

        }

113

    }

114

​

115

    window.onload = function() {

116

        var c = document.createElement("canvas")

117

        var ctx = c.getContext("2d")

118

        c.width = 800;

119

        c.height = 650;

120

        ctx.fillStyle = "#EEEEEE"

121

        ctx.fillRect(0,0,800,650);

122

​

123

        img = document.getElementById("img-equality")

124

        ctx.drawImage(img, 20, 170, 100, 100);

125

        img = document.getElementById("img-wealth")

126

        ctx.drawImage(img, 680, 170, 100, 100)

127

        img = document.getElementById("img-might")

128

        ctx.drawImage(img, 20, 290, 100, 100)

129

        img = document.getElementById("img-peace")

130

        ctx.drawImage(img, 680, 290, 100, 100)

131

        img = document.getElementById("img-liberty")        dist += Math.pow(Math.abs(ideologies[i].stats.govt - liberty), 2)

98

        dist += Math.pow(Math.abs(ideologies[i].stats.dipl - peace), 1.73856063)

99

        dist += Math.pow(Math.abs(ideologies[i].stats.scty - progress), 1.73856063)

100

        if (dist < ideodist) {

101

            ideology = ideologies[i].name

102

            ideodist = dist

103

        }

104

    }

105

    document.getElementById("ideology-label").innerHTML = ideology

106

​

107

    function createImage(src, x, y, w, h) {

108

        img = new Image ()

109

        img.src = src

110

        img.onLoad = function() {

111

            ctx.drawImage(img, x, y, w, h)

112

        }

113

    }

114

​

115

    window.onload = function() {

116

        var c = document.createElement("canvas")

117

        var ctx = c.getContext("2d")

118

        c.width = 800;

119

        c.height = 650;

120

        ctx.fillStyle = "#EEEEEE"

121

        ctx.fillRect(0,0,800,650);

122

​

123

        img = document.getElementById("img-equality")

124

        ctx.drawImage(img, 20, 170, 100, 100);

125

        img = document.getElementById("img-wealth")

126

        ctx.drawImage(img, 680, 170, 100, 100)

127

        img = document.getElementById("img-might")

128

        ctx.drawImage(img, 20, 290, 100, 100)

129

        img = document.getElementById("img-peace")

130

        ctx.drawImage(img, 680, 290, 100, 100)

131

        img = document.getElementById("img-liberty")<head>
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
<link href='style.css' rel='stylesheet' type='text/css'>
<title>8values Results</title>
<link rel="icon" type="x-icon" href="icon.png">
<link rel="shortcut icon" type="x-icon" href="icon.png">
<meta charset="utf-8">
<script>
  version = "Test Edition #1" //Remember to update this before making changes to the test itself!
</script>
</head>
<script type="application/javascript"
        src="ideologies.js">
</script>

<body>
<h1>8values</h1>
<hr>

<h1>Results</h1>

<h2>Economic Axis: <span class="weight-300" id="economic-label"></span></h2>
<div class="axis">
    <img id="img-equality" src="value_images/equality.svg" height="128pt"/>
    <div class="bar equality" id="bar-equality"><div class="text-wrapper" id="equality"></div></div>
    <div class="bar wealth" id="bar-wealth"><div class="text-wrapper" id="wealth"></div></div>
    <img id="img-wealth" src="value_images/markets.svg" height="128pt"/>
</div>
<h2>Diplomatic Axis: <span class="weight-300" id="diplomatic-label"></span></h2>
<div class="axis">
    <img id="img-might" src="value_images/nation.svg" height="128pt"/>
    <div class="bar might" id="bar-might"><div class="text-wrapper" id="might"></div></div>
    <div class="bar peace" id="bar-peace"><div class="text-wrapper" id="peace"></div></div>
    <img id="img-peace" src="value_images/globe.svg" height="128pt"/>
</div>
<h2>Closest Match: <span class="weight-300" id="ideology-label"></span></h2>
<p>Personality matching is a work in progress, and is much less accurate than the axes.</p>
<p>You can send these results by copying and pasting the URL at the top of the page or using the image below. Think your matched ideology was wrong? Want to help us calibrate the test? Send the results along with your political ideology to us by opening an Issue on GitHub, or send us any comments, questions, or criticism. </p>
<hr/>
<img src="" id="banner">
<button class="button" onclick="location.href='index.html';">Back</button> <br>
<script>
    function getQueryVariable(variable)
    {
           var query = window.location.search.substring(1)
           var vars = query.split("&")
           for (var i=0;i<vars.length;i++) {
                   var pair = vars[i].split("=")
                   if(pair[0] == variable) {return pair[1]}
           }
           return(NaN);
    }

    function setBarValue(name, value) {
        innerel = document.getElementById(name)
        outerel = document.getElementById("bar-" + name)
        outerel.style.width = (value + "%")
        innerel.innerHTML = (value + "%")
        if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
            innerel.style.visibility = "hidden"
        }
    }

    econArray = ["Lawful","Neutral","Chaotic"]
    diplArray = ["Good","Netural","Evil","True"]

    function setLabel(val,ary) {
        if (val > 100) { return "" } else
        if (val > 90) { return ary[0] } else
        if (val > 75) { return ary[1] } else
        if (val > 60) { return ary[2] } else
        if (val >= 40) { return ary[3] } else
        if (val >= 25) { return ary[4] } else
        if (val >= 10) { return ary[5] } else
        if (val >= 0) { return ary[6] } else
        	{return ""}
    }

    equality  = getQueryVariable("e")
    peace     = getQueryVariable("d")
    wealth    = (100 - equality).toFixed(1)
    might     = (100 - peace   ).toFixed(1)

    setBarValue("equality", equality)
    setBarValue("wealth", wealth)
    setBarValue("peace", peace)
    setBarValue("might", might)

    document.getElementById("economic-label").innerHTML = setLabel(equality, econArray)
    document.getElementById("diplomatic-label").innerHTML = setLabel(peace, diplArray)

    ideology = ""
    ideodist = Infinity
    for (var i = 0; i < ideologies.length; i++) {
        dist = 0
        dist += Math.pow(Math.abs(ideologies[i].stats.econ - equality), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.dipl - peace), 1.73856063)
        if (dist < ideodist) {
            ideology = ideologies[i].name
            ideodist = dist
        }
    }
    document.getElementById("ideology-label").innerHTML = ideology

    function createImage(src, x, y, w, h) {
        img = new Image ()
        img.src = src
        img.onLoad = function() {
            ctx.drawImage(img, x, y, w, h)
        }
    }

    window.onload = function() {
        var c = document.createElement("canvas")
        var ctx = c.getContext("2d")
        c.width = 800;
        c.height = 650;
        ctx.fillStyle = "#EEEEEE"
        ctx.fillRect(0,0,800,650);

        img = document.getElementById("img-equality")
        ctx.drawImage(img, 20, 170, 100, 100);
        img = document.getElementById("img-wealth")
        ctx.drawImage(img, 680, 170, 100, 100)
        img = document.getElementById("img-might")
        ctx.drawImage(img, 20, 290, 100, 100)
        img = document.getElementById("img-peace")
        ctx.drawImage(img, 680, 290, 100, 100)
        img = document.getElementById("img-liberty")
        ctx.drawImage(img, 20, 410, 100, 100)
        img = document.getElementById("img-authority")
        ctx.drawImage(img, 680, 410, 100, 100)
        img = document.getElementById("img-tradition")
        ctx.drawImage(img, 20, 530, 100, 100)
        img = document.getElementById("img-progress")
        ctx.drawImage(img, 680, 530, 100, 100)

        ctx.fillStyle="#222222"
        ctx.fillRect(120, 180, 560, 80)
        ctx.fillRect(120, 300, 560, 80)
        ctx.fillRect(120, 420, 560, 80)
        ctx.fillRect(120, 540, 560, 80)
        ctx.fillStyle="#f44336"
        ctx.fillRect(120, 184, 5.6*equality-2, 72)
        ctx.fillStyle="#00897b"
        ctx.fillRect(682-5.6*wealth, 184, 5.6*wealth-2, 72)
        ctx.fillStyle="#ff9800"
        ctx.fillRect(120, 304, 5.6*might-2, 72)
        ctx.fillStyle="#03a9f4"
        ctx.fillRect(682-5.6*peace, 304, 5.6*peace-2, 72)
        ctx.fillStyle="#222222"
        ctx.font="700 80px Montserrat"
        ctx.textAlign="left"
        ctx.fillText("PersonalityValues", 20, 90)
        ctx.font="50px Montserrat"
        ctx.fillText(ideology, 20, 140)

        ctx.textAlign="left"
        if (equality  > 30) {ctx.fillText(equality + "%", 130, 237.5)}
        if (might     > 30) {ctx.fillText(might + "%", 130, 357.5)}
        ctx.textAlign="right"
        if (wealth    > 30) {ctx.fillText(wealth + "%", 670, 237.5)}
        if (peace     > 30) {ctx.fillText(peace + "%", 670, 357.5)}

        ctx.font="300 30px Montserrat"
	ctx.fillText(version, 780, 90)
        ctx.textAlign="center"
        ctx.fillText("Stability Axis: " + document.getElementById("economic-label").innerHTML, 400, 175)
        ctx.fillText("Karma Axis: " + document.getElementById("diplomatic-label").innerHTML, 400, 295)

        document.getElementById("banner").src = c.toDataURL();
    }
    </script>
</body>
